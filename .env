# XAUUSD Gold Trading System - Environment Variables
# Copy this file to .env and fill in your actual values

# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=production  # development, staging, production
DEBUG=false
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:5434/gold_trader
DB_HOST=127.0.0.1
DB_PORT=5434
DB_NAME=gold_trader
DB_USER=postgres
DB_PASSWORD=postgres
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_SSL_MODE=prefer
DATABASE_ECHO=false  # Set to true for SQL query logging

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# TELEGRAM CONFIGURATION
# ============================================================================
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHANNEL_ID=-1001234567890
TELEGRAM_ADMIN_IDS=123456789,987654321  # Comma-separated user IDs
TELEGRAM_PARSE_MODE=Markdown
TELEGRAM_DISABLE_WEB_PAGE_PREVIEW=true
TELEGRAM_TIMEOUT=30

# ============================================================================
# MT5 CONFIGURATION (Windows Connector)
# ============================================================================
MT5_LOGIN=12345678
MT5_PASSWORD=your_mt5_password
MT5_SERVER=BrokerName-Demo
MT5_TIMEOUT=60000
MT5_PATH=C:\Program Files\MetaTrader 5\terminal64.exe

# ============================================================================
# WEBSOCKET CONFIGURATION
# ============================================================================
WEBSOCKET_HOST=0.0.0.0
WEBSOCKET_PORT=8765
WEBSOCKET_SSL_ENABLED=true
WEBSOCKET_SSL_CERT=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
WEBSOCKET_SSL_KEY=/etc/letsencrypt/live/yourdomain.com/privkey.pem
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MAX_MESSAGE_SIZE=1048576  # 1MB
WEBSOCKET_COMPRESSION=true

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_SECRET_KEY=generate-a-secure-random-key-minimum-32-characters
SECRET_KEY=very-long-and-secure-random-secret-key-32-chars
JWT_SECRET_KEY=another-very-long-and-secure-random-secret-key-32-chars
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=30
API_CORS_ORIGINS=http://localhost:3000,https://yourdomain.com
API_RATE_LIMIT=100/minute
API_MAX_REQUEST_SIZE=10485760  # 10MB

# ============================================================================
# TRADING CONFIGURATION
# ============================================================================
# Risk Management
RISK_PER_TRADE=1.0  # Percentage of account balance
MAX_CONCURRENT_TRADES=2
MIN_RISK_REWARD=2.0
MAX_DAILY_LOSS=5.0  # Percentage
MAX_DAILY_TRADES=10

# Position Sizing
DEFAULT_POSITION_SIZE=0.1  # Lots
MIN_POSITION_SIZE=0.01
MAX_POSITION_SIZE=1.0
POSITION_SIZE_MULTIPLIER=1.0

# Trading Hours (UTC)
TRADING_START_HOUR=0
TRADING_END_HOUR=23
TRADING_DAYS=1,2,3,4,5  # Monday to Friday

# ============================================================================
# SMART MONEY CONCEPTS PARAMETERS
# ============================================================================
# Fair Value Gap (FVG)
FVG_MIN_SIZE_PIPS=5
FVG_MAX_AGE_CANDLES=50
FVG_STRENGTH_THRESHOLD=0.7

# Order Blocks
OB_LOOKBACK_CANDLES=20
OB_MIN_VOLUME_MULTIPLIER=2.0
OB_MIN_WICK_RATIO=0.6
OB_ROUND_NUMBER_THRESHOLD=10

# Liquidity Analysis
LIQUIDITY_SWEEP_THRESHOLD=5  # Pips beyond swing point
LIQUIDITY_POOL_MIN_SIZE=3  # Number of swing points

# Market Structure
STRUCTURE_SWING_LOOKBACK=10
STRUCTURE_MIN_MOVE_PIPS=20
STRUCTURE_CONFIRMATION_CANDLES=2

# Signal Generation
SIGNAL_MIN_CONFLUENCE_SCORE=80
SIGNAL_H4_WEIGHT=0.4
SIGNAL_H1_WEIGHT=0.35
SIGNAL_M15_WEIGHT=0.25

# ============================================================================
# TIMEFRAME CONFIGURATION
# ============================================================================
TIMEFRAMES=M15,H1,H4
PRIMARY_TIMEFRAME=H1
CANDLE_HISTORY_SIZE=200

# ============================================================================
# SESSION CONFIGURATION
# ============================================================================
# Asian Session (UTC)
ASIAN_SESSION_START=00:00
ASIAN_SESSION_END=08:00
ASIAN_SESSION_RISK_MULTIPLIER=0.5

# London Session (UTC)
LONDON_SESSION_START=08:00
LONDON_SESSION_END=13:00
LONDON_SESSION_RISK_MULTIPLIER=1.0

# NY Session (UTC)
NY_SESSION_START=13:00
NY_SESSION_END=17:00
NY_SESSION_RISK_MULTIPLIER=1.5

# ============================================================================
# VOLATILITY MANAGEMENT
# ============================================================================
ATR_PERIOD=14
ATR_HIGH_THRESHOLD=15  # Pips
ATR_LOW_THRESHOLD=5  # Pips
VOLATILITY_ADJUSTMENT_ENABLED=true

# ============================================================================
# NOTIFICATION SETTINGS
# ============================================================================
NOTIFY_ON_SIGNAL=true
NOTIFY_ON_TRADE_OPEN=true
NOTIFY_ON_TRADE_CLOSE=true
NOTIFY_ON_TP_HIT=true
NOTIFY_ON_SL_HIT=true
NOTIFY_ON_ERROR=true
NOTIFY_DAILY_REPORT=true
DAILY_REPORT_TIME=00:00  # UTC

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_FILE=/var/log/xauusd-trading/app.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=10
LOG_FORMAT=json  # json or text
LOG_INCLUDE_TIMESTAMP=true
LOG_INCLUDE_LEVEL=true
LOG_INCLUDE_MODULE=true

# ============================================================================
# MONITORING & METRICS
# ============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_EXPORT_INTERVAL=60  # Seconds
HEALTH_CHECK_INTERVAL=30  # Seconds

# ============================================================================
# PERFORMANCE TRACKING
# ============================================================================
TRACK_PERFORMANCE=true
PERFORMANCE_CALCULATION_INTERVAL=3600  # 1 hour in seconds
PERFORMANCE_RETENTION_DAYS=365

# ============================================================================
# BACKTESTING CONFIGURATION
# ============================================================================
BACKTESTING_ENABLED=false
BACKTESTING_START_DATE=2023-01-01
BACKTESTING_END_DATE=2023-12-31
BACKTESTING_INITIAL_BALANCE=10000
BACKTESTING_DATA_PATH=/data/historical

# ============================================================================
# SECURITY SETTINGS
# ============================================================================
# JWT
JWT_SECRET_KEY=generate-another-secure-random-key-minimum-32-characters
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# API Keys
API_KEY_HEADER=X-API-Key
API_KEY_ROTATION_DAYS=90

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # Seconds

# IP Whitelisting
IP_WHITELIST_ENABLED=false
IP_WHITELIST=127.0.0.1,192.168.1.0/24

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 0 * * *  # Daily at midnight (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups
BACKUP_COMPRESS=true

# ============================================================================
# ERROR HANDLING
# ============================================================================
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_SECONDS=5
RETRY_BACKOFF_MULTIPLIER=2
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60

# ============================================================================
# EXTERNAL SERVICES
# ============================================================================
# Economic Calendar API (optional)
ECONOMIC_CALENDAR_ENABLED=false
ECONOMIC_CALENDAR_API_KEY=
ECONOMIC_CALENDAR_URL=https://api.example.com/calendar

# News Filter
NEWS_FILTER_ENABLED=true
NEWS_PAUSE_BEFORE_MINUTES=30
NEWS_PAUSE_AFTER_MINUTES=30
HIGH_IMPACT_EVENTS=FOMC,NFP,CPI,GDP,Interest Rate Decision

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================
# Only used in development environment
DEV_AUTO_RELOAD=true
DEV_MOCK_MT5=true
DEV_MOCK_TELEGRAM=true
DEV_FAST_TESTING=false

# ============================================================================
# DOCKER CONFIGURATION
# ============================================================================
COMPOSE_PROJECT_NAME=xauusd-trading
DOCKER_RESTART_POLICY=unless-stopped
DOCKER_NETWORK=xauusd-network

# ============================================================================
# TIMEZONE
# ============================================================================
TZ=UTC

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_MULTI_INSTRUMENT=false
FEATURE_ML_ENHANCEMENT=false
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_WEB_DASHBOARD=false
FEATURE_MOBILE_NOTIFICATIONS=false

# ============================================================================
# INSTRUMENT SPECIFIC (XAUUSD)
# ============================================================================
XAUUSD_ENABLED=true
XAUUSD_MIN_SPREAD=0.3
XAUUSD_MAX_SPREAD=2.0
XAUUSD_COMMISSION=0  # Per lot
XAUUSD_SWAP_LONG=0
XAUUSD_SWAP_SHORT=0
XAUUSD_POINT_VALUE=0.01
XAUUSD_CONTRACT_SIZE=100

# ============================================================================
# NOTES
# ============================================================================
# 1. Never commit the actual .env file to version control
# 2. Generate secure random keys using: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 3. Keep production credentials separate from development
# 4. Rotate API keys and passwords regularly
# 5. Use strong passwords (minimum 16 characters, mixed case, numbers, symbols)
# 6. Enable SSL/TLS for all external connections
# 7. Regularly backup your .env file securely
# 8. Review and update these settings based on your trading strategy